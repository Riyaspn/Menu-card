<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <title>Table Ordering</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <style> body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#fafafa; color:#222; } header { position: sticky; top:0; background:#fff; border-bottom:1px solid #eee; padding:12px 16px; display:flex; justify-content:space-between; align-items:center; } .container { padding:16px; max-width:720px; margin:0 auto; } .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap:12px; } .card { background:#fff; border:1px solid #eee; border-radius:8px; padding:12px; display:flex; flex-direction:column; gap:8px; } .btn { background:#111; color:#fff; border:none; padding:10px 12px; border-radius:6px; cursor:pointer; } .cart { position:fixed; right:16px; bottom:16px; background:#111; color:#fff; padding:12px 16px; border-radius:999px; } .banner { background:#fff3cd; color:#664d03; border:1px solid #ffe69c; padding:8px 12px; border-radius:6px; margin-bottom:12px; display:none; } </style> </head> <body> <header> <strong id="rName">Restaurant</strong> <nav id="meta"></nav> </header> <div class="container"> <div id="banner" class="banner"></div> <h2>Menu</h2> <div id="menu" class="grid"></div> </div> <button id="cartBtn" class="cart">Cart (0)</button> <script> // Parse /t/{restaurantId}/{tableId} const parts = location.pathname.split('/').filter(Boolean); // ["t","RESTAURANT1","TABLE12"] const restaurantId = parts || 'DEMO_RESTAURANT'; const tableId = parts || 'TABLE_X'; // Demo: subscription gate stub. Replace with real API later. // States: active | past_due | canceled const subscriptionState = 'active'; // change to 'past_due' or 'canceled' to test const rNameEl = document.getElementById('rName'); const metaEl = document.getElementById('meta'); const bannerEl = document.getElementById('banner'); rNameEl.textContent = 'Menu Card — ' + restaurantId; metaEl.textContent = 'Table ' + tableId; if (subscriptionState === 'past_due') { bannerEl.style.display = 'block'; bannerEl.textContent = 'Subscription due. Service will be disabled soon.'; } else if (subscriptionState === 'canceled') { // Block access document.body.innerHTML = '<div class="container"><h2>Service inactive</h2><p>This restaurant’s subscription is inactive. Please contact staff.</p></div>'; } const items = [ { id:1, name:'Margherita Pizza', price:249, desc:'Classic tomato, mozzarella, basil' }, { id:2, name:'Paneer Tikka', price:199, desc:'Spiced cottage cheese skewers' }, { id:3, name:'Masala Fries', price:129, desc:'Crispy fries with spice mix' } ]; const cart = new Map(); const menuEl = document.getElementById('menu'); const cartBtn = document.getElementById('cartBtn'); function renderMenu() { menuEl.innerHTML = items.map(i => ` <div class="card"> <div><strong>${i.name}</strong></div> <div style="color:#555">${i.desc}</div> <div>₹${i.price}</div> <button class="btn" onclick="addToCart(${i.id})">Add</button> </div> `).join(''); } function addToCart(id) { cart.set(id, (cart.get(id) || 0) + 1); updateCartBtn(); saveCart(); } function updateCartBtn() { let count = 0; for (const qty of cart.values()) count += qty; cartBtn.textContent = `Cart (${count})`; } function saveCart() { const obj = Array.from(cart.entries()).reduce((o,[id,qty]) => (o[id]=qty,o), {}); localStorage.setItem(`cart:${restaurantId}:${tableId}`, JSON.stringify(obj)); } function loadCart() { const raw = localStorage.getItem(`cart:${restaurantId}:${tableId}`); if (!raw) return; try { const obj = JSON.parse(raw); for (const id in obj) cart.set(Number(id), obj[id]); } catch {} } cartBtn.addEventListener('click', () => { const params = new URLSearchParams({ r: restaurantId, t: tableId }); location.href = `/t/checkout.html?${params.toString()}`; }); loadCart(); renderMenu(); updateCartBtn(); </script> </body> </html>
