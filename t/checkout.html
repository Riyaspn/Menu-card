<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <title>Checkout</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <style> body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#fafafa; color:#222; } .container { padding:16px; max-width:720px; margin:0 auto; } .card { background:#fff; border:1px solid #eee; border-radius:8px; padding:12px; margin-bottom:12px; } .row { display:flex; justify-content:space-between; align-items:center; padding:6px 0; } .btn { background:#111; color:#fff; border:none; padding:10px 12px; border-radius:6px; cursor:pointer; width:100%; } .muted { color:#666; } </style> </head> <body> <div class="container"> <h2>Checkout</h2> <div id="meta" class="muted"></div> <div id="items" class="card"></div> <div class="card"> <button id="payCash" class="btn">Pay Cash at Table</button> <div style="height:8px"></div> <button id="payUPI" class="btn">Pay by UPI (Demo)</button> </div> <div id="msg"></div> </div> <script> const params = new URLSearchParams(location.search); const restaurantId = params.get('r') || 'DEMO_RESTAURANT'; const tableId = params.get('t') || 'TABLE_X'; document.getElementById('meta').textContent = `Restaurant: ${restaurantId} - Table: ${tableId}`; const itemsMaster = { 1: { name:'Margherita Pizza', price:249 }, 2: { name:'Paneer Tikka', price:199 }, 3: { name:'Masala Fries', price:129 } }; function loadCart() { const raw = localStorage.getItem(`cart:${restaurantId}:${tableId}`); return raw ? JSON.parse(raw) : {}; } function render() { const cart = loadCart(); const itemsEl = document.getElementById('items'); let total = 0; const rows = Object.entries(cart).map(([id, qty]) => { const m = itemsMaster[id]; const line = m.price * qty; total += line; return `<div class="row"><div>${m.name} × ${qty}</div><div>₹${line}</div></div>`; }).join(''); itemsEl.innerHTML = rows + `<hr/><div class="row"><strong>Total</strong><strong>₹${total}</strong></div>`; return total; } function clearCart() { localStorage.removeItem(`cart:${restaurantId}:${tableId}`); } const total = render(); document.getElementById('payCash').addEventListener('click', () => { document.getElementById('msg').textContent = 'Order placed. Please pay cash to staff.'; clearCart(); }); document.getElementById('payUPI').addEventListener('click', () => { // Demo UPI intent deeplink (replace with PSP link later) // Example: upi://pay?pa=merchant@bank&pn=Restaurant&am=TOTAL&tn=Order&tr=ORDER_ID&cu=INR const orderId = 'ORD' + Date.now(); const upiUrl = `upi://pay?pa=merchant@bank&pn=${encodeURIComponent(restaurantId)}&am=${total}&tn=${encodeURIComponent('Table '+tableId)}&tr=${orderId}&cu=INR`; window.location.href = upiUrl; // On real integration, rely on PSP checkout + webhooks to confirm payment and mark order paid. }); </script> </body> </html>
